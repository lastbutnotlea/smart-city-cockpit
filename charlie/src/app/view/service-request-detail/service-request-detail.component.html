<div *ngIf="!loaded">
  <h3>Loading...</h3>
</div>

<div *ngIf="loaded">
    <h3 class="text-center">
      <div [ngClass]="{'color-fine': serviceRequest.priority === 'FINE',
       'color-problematic': serviceRequest.priority === 'PROBLEMATIC',
       'color-critical': serviceRequest.priority === 'CRITICAL' }">
        <i class="fa fa-lightbulb-o fa-2x float-right small-padding-right" aria-hidden="true"></i>
      </div>
      {{title}}
    </h3>
  <h6 class="text-center margin-bottom">Service Request ID: {{serviceRequest.id}}</h6>

  <div class="no-float margin-bottom">
    <button class="btn btn-outline-primary" (click)="editServiceRequest()">Edit Service Request</button>
    <button class="btn btn-outline-danger" (click)="showConfirmModal()">Delete</button>
  </div>

  <!-- feedback -->
  <div class="bounding-box bg-light">
    <h5 class="text-lg-left">
      <label class="padding-emb-box-headline">Feedback</label>
    </h5>
    <p *ngFor="let feedback of serviceRequest.feedbacks">
      <label class="text-secondary">{{feedback.message}}</label>
      <span [ngClass]="{'color-fine': serviceRequest.priority === 'FINE',
       'color-problematic': serviceRequest.priority === 'PROBLEMATIC',
       'color-critical': serviceRequest.priority === 'CRITICAL' }">
        <i class="fa fa-lightbulb-o float-right small-padding-right" aria-hidden="true"></i>
      </span>
    </p>
  </div>

  <!-- info about service request -->
  <div class="bounding-box bg-light">
    <h5 class="text-lg-left">
      <label class="padding-emb-box-headline">Info</label>
    </h5>
    <p>Name: {{serviceRequest.name}}</p>
    <p>Type: {{serviceRequest.serviceType}}</p>
    <p>Status Code: {{serviceRequest.statusCode}}</p>
    <p>Due Date: {{serviceRequest.dueDate}}</p>
    <p>Completion Date: {{serviceRequest.completionDate}}</p>
    <p>Priority: {{serviceRequest.priority}}</p>
    <p>Description:
      <span *ngFor="let description of serviceRequest.serviceRequestDescription">
        {{description.text}}
      </span>
    </p>
  </div>

  <!-- target (vehicle or stop) -->
  <div *ngIf="hasTarget()&&hasVehicleTarget()" class="d-flex flex-1 flex-column">
    <!-- vehicle -->
    <app-embedded-vehicle [vehicle]="serviceRequest.target" class="flex-1 bounding-box"></app-embedded-vehicle>
  </div>
  <div *ngIf="hasTarget()&&hasStopTarget()" class="d-flex flex-1 flex-column">
    <!-- stop -->
    <app-embedded-stop [stop]="serviceRequest.target" class="flex-1 bounding-box"></app-embedded-stop>
  </div>


  <div class="no-float big-padding-top">
    <button class="btn btn-outline-secondary" (click)="goBack()">Back To Trips</button>
  </div>
</div>
